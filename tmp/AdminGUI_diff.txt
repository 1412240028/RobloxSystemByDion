======= ADD executeCommand AFTER module loads, below loadModules() =======
<<<<<<< SEARCH
if not loadModules() then
	return -- Exit if modules failed to load
end
=======

if not loadModules() then
	return -- Exit if modules failed to load
end

-- Execute admin command via RemoteEvent directly (reliable)
local function executeCommand(command, args)
	if not RemoteEvents or not RemoteEvents.FireAdminCommand then
		warn("[AdminGUI] Cannot execute command - RemoteEvents or FireAdminCommand missing")
		return
	end
	args = args or {}
	RemoteEvents.FireAdminCommand(command, args)
	print(string.format("[AdminGUI] Executed admin command: %s %s", command, table.concat(args, " ")))
end

>>>>>>> REPLACE

======= ADD input box and modify playBtn MouseButton1Click in CreateCommandPage =======
<<<<<<< SEARCH
		-- Play Button
		local playBtn = Instance.new("TextButton")
		playBtn.Name = "PlayButton"
		playBtn.Size = UDim2.new(0, 45, 0, 45)
		playBtn.Position = UDim2.new(1, -100, 0.5, -22.5)
		playBtn.BackgroundColor3 = Color3.fromRGB(20, 40, 80)
		playBtn.BorderSizePixel = 0
		playBtn.Font = Enum.Font.GothamBold
		playBtn.Text = "â–¶"
		playBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		playBtn.TextSize = 18
		playBtn.Parent = cmdCard

		local playCorner = Instance.new("UICorner")
		playCorner.CornerRadius = UDim.new(0, 8)
		playCorner.Parent = playBtn

		-- Stop Button
		local stopBtn = Instance.new("TextButton")
		stopBtn.Name = "StopButton"
		stopBtn.Size = UDim2.new(0, 45, 0, 45)
		stopBtn.Position = UDim2.new(1, -50, 0.5, -22.5)
		stopBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
		stopBtn.BorderSizePixel = 0
		stopBtn.Font = Enum.Font.GothamBold
		stopBtn.Text = "â– "
		stopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		stopBtn.TextSize = 18
		stopBtn.Visible = false
		stopBtn.Parent = cmdCard

		local stopCorner = Instance.new("UICorner")
		stopCorner.CornerRadius = UDim.new(0, 8)
		stopCorner.Parent = stopBtn

		-- âœ… FIXED: Actually execute the command via chat
		playBtn.MouseButton1Click:Connect(function()
			local commandText = "/" .. cmd.name

			-- Visual feedback
			playBtn.BackgroundColor3 = Color3.fromRGB(100, 180, 255)
			task.wait(0.1)
			playBtn.BackgroundColor3 = Color3.fromRGB(20, 40, 80)

			if cmd.args == "" then
				-- âœ… FIXED: Send command via chat system
				local TextChatService = game:GetService("TextChatService")
				local TextChannels = TextChatService:FindFirstChild("TextChannels")

				if TextChannels then
					-- New chat system
					local generalChannel = TextChannels:FindFirstChild("RBXGeneral")
					if generalChannel then
						generalChannel:SendAsync(commandText)
						print("[AdminGUI] ðŸŽ® Executed command:", commandText)
					else
						warn("[AdminGUI] âš ï¸ RBXGeneral channel not found")
					end
				else
					-- Legacy chat fallback
					local ReplicatedStorage = game:GetService("ReplicatedStorage")
					local DefaultChatSystemChatEvents = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
					if DefaultChatSystemChatEvents then
						local SayMessageRequest = DefaultChatSystemChatEvents:FindFirstChild("SayMessageRequest")
						if SayMessageRequest then
							SayMessageRequest:FireServer(commandText, "All")
							print("[AdminGUI] ðŸŽ® Executed command (legacy):", commandText)
						end
					else
						warn("[AdminGUI] âš ï¸ Could not execute command - no chat system found")
					end
				end
			else
				-- Command needs arguments - show input
				local message = string.format("ðŸ’¡ Type in chat: %s %s", commandText, cmd.args)
				if RemoteEvents and RemoteEvents.SendRaceNotification then
					pcall(function()
						RemoteEvents.SendRaceNotification(player, {message = message})
					end)
				end
				print("[AdminGUI] â„¹ï¸ Command needs args:", commandText, cmd.args)
			end
		end)
=======
		-- Arguments InputBox (visible only if args present)
		local argsInput = Instance.new("TextBox")
		argsInput.Size = UDim2.new(0, 250, 0, 25)
		argsInput.Position = UDim2.new(0, 320, 0, 17)
		argsInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		argsInput.BorderSizePixel = 0
		argsInput.Font = Enum.Font.SourceSans
		argsInput.PlaceholderText = cmd.args ~= "" and ("Args: " .. cmd.args) or ""
		argsInput.TextColor3 = Color3.fromRGB(255, 255, 255)
		argsInput.TextSize = 14
		argsInput.ClearTextOnFocus = false
		argsInput.Parent = cmdCard
		argsInput.Visible = cmd.args ~= ""

		-- Play Button
		local playBtn = Instance.new("TextButton")
		playBtn.Name = "PlayButton"
		playBtn.Size = UDim2.new(0, 45, 0, 45)
		playBtn.Position = UDim2.new(1, -100, 0.5, -22.5)
		playBtn.BackgroundColor3 = Color3.fromRGB(20, 40, 80)
		playBtn.BorderSizePixel = 0
		playBtn.Font = Enum.Font.GothamBold
		playBtn.Text = "â–¶"
		playBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		playBtn.TextSize = 18
		playBtn.Parent = cmdCard

		local playCorner = Instance.new("UICorner")
		playCorner.CornerRadius = UDim.new(0, 8)
		playCorner.Parent = playBtn

		-- Stop Button
		local stopBtn = Instance.new("TextButton")
		stopBtn.Name = "StopButton"
		stopBtn.Size = UDim2.new(0, 45, 0, 45)
		stopBtn.Position = UDim2.new(1, -50, 0.5, -22.5)
		stopBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
		stopBtn.BorderSizePixel = 0
		stopBtn.Font = Enum.Font.GothamBold
		stopBtn.Text = "â– "
		stopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		stopBtn.TextSize = 18
		stopBtn.Visible = false
		stopBtn.Parent = cmdCard

		local stopCorner = Instance.new("UICorner")
		stopCorner.CornerRadius = UDim.new(0, 8)
		stopCorner.Parent = stopBtn

		-- âœ… FIXED: Actually execute the command via RemoteEvent
		playBtn.MouseButton1Click:Connect(function()
			local commandText = cmd.name
			local argsText = argsInput.Text:match("^%s*(.-)%s*$") or ""
			local argsTable = {}
			if argsText ~= "" then
				for word in string.gmatch(argsText, "%S+") do
					table.insert(argsTable, word)
				end
			end

			-- Visual feedback
			playBtn.BackgroundColor3 = Color3.fromRGB(100, 180, 255)
			task.wait(0.1)
			playBtn.BackgroundColor3 = Color3.fromRGB(20, 40, 80)

			executeCommand(commandText, argsTable)
		end)
